<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ƒê√™m Trung Thu Ph√©p Thu·∫≠t - M√≥n Qu√† ƒê·∫∑c Bi·ªát</title>
<style>
    /* ------------------------------ B·∫¶U TR·ªúI CHUNG ------------------------------ */
    body {
        margin: 0;
        overflow: hidden;
        height: 100vh;
        width: 100vw;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: 'Arial', sans-serif;
        color: #fff;
        background: radial-gradient(circle at center, #0b0f19 40%, #000010);
    }

    /* Sao nh·∫•p nh√°y */
    .star {
        position: absolute;
        background: #fff;
        border-radius: 50%;
        animation: twinkle linear infinite;
        box-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
        z-index: 5;
    }
    @keyframes twinkle {
        0%, 100% { opacity: 0.4; }
        50% { opacity: 1; transform: scale(1.2); }
    }

    /* Sao bƒÉng */
    .shooting-star {
        position: absolute;
        width: 100px;
        height: 2px;
        background: linear-gradient(90deg, white, rgba(255,255,255,0));
        opacity: 0.8;
        top: 10%;
        left: -120px;
        transform: rotate(30deg);
        animation: shooting 6s linear infinite;
        z-index: 5;
    }
    @keyframes shooting {
        0% { left: -120px; top: 10%; opacity: 0; }
        20% { opacity: 1; }
        50% { left: 120%; top: 70%; opacity: 1; }
        100% { opacity: 0; left: 120%; top: 70%; }
    }

    /* Ph√°o hoa - D√πng chung */
    .firework {
        position: absolute;
        width: 4px;
        height: 4px;
        border-radius: 50%;
        background: white;
        animation: explode 1.2s ease-out forwards;
        z-index: 99;
    }
    @keyframes explode {
        0% { transform: scale(0); opacity: 1; }
        100% { transform: scale(1.5) translate(var(--x), var(--y)); opacity: 0; }
    }

    /* Hi·ªáu ·ª©ng kh√≥i - D√πng chung */
    .smoke {
        position: absolute;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(255,255,255,0.4), rgba(255,255,255,0));
        animation: smokeRise 3s ease-out forwards;
        z-index: 50;
    }
    @keyframes smokeRise {
        0% { opacity: 0.7; transform: translate(-50%, 0) scale(0.5); }
        100% { opacity: 0; transform: translate(-50%, -200px) scale(1.5); }
    }

    /* √Ånh s√°ng b√πng n·ªï - D√πng chung */
    .burst {
        position: absolute;
        width: 350px;
        height: 350px;
        background: radial-gradient(circle, rgba(255,255,200,0.7), rgba(255,255,255,0) 70%);
        border-radius: 50%;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
        animation: burst 1.5s ease-out forwards;
        z-index: 90;
    }
    @keyframes burst {
        0% { transform: translate(-50%, -50%) scale(0); opacity: 0.8; }
        100% { transform: translate(-50%, -50%) scale(3); opacity: 0; }
    }


    /* ------------------------------ M√ÄN H√åNH 1: H·ªòP QU√Ä (GIFT BOX SCREEN) ------------------------------ */
    #gift-screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        transition: opacity 1s;
        z-index: 20; 
    }

    .gift-box {
        position: relative;
        width: 160px;
        height: 160px;
        background: linear-gradient(145deg, #ff6699, #ff3366);
        border-radius: 10px;
        cursor: pointer;
        box-shadow: 0 0 30px 10px rgba(255, 100, 150, 0.4);
        animation: pulseGift 2s infinite alternate;
        transform-origin: center bottom;
        z-index: 10;
    }

    .gift-box:hover {
        transform: scale(1.05);
    }

    .gift-lid {
        position: absolute;
        top: -35px;
        left: 0;
        width: 100%;
        height: 45px;
        background: linear-gradient(145deg, #ff0033, #ff6699);
        border-radius: 5px;
        transition: transform 1.2s ease-out;
        transform-origin: center center;
        z-index: 15;
    }

    .ribbon {
        position: absolute;
        background: gold;
        width: 20px;
        height: 100%;
        left: 50%;
        top: 0;
        transform: translateX(-50%);
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
    }

    .ribbon-horizontal {
        position: absolute;
        background: gold;
        height: 20px;
        width: 100%;
        top: 50%;
        transform: translateY(-50%);
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
    }

    .message {
        color: #fff;
        margin-bottom: 30px;
        font-size: 18px;
        text-align: center;
        z-index: 20;
    }
    
    .message p {
        background-color: rgba(0, 0, 0, 0.5);
        padding: 5px 10px;
        border-radius: 5px;
    }

    @keyframes pulseGift {
        0% { transform: scale(1); box-shadow: 0 0 20px rgba(255,150,200,0.3); }
        100% { transform: scale(1.05); box-shadow: 0 0 40px rgba(255,100,200,0.7); }
    }

    @keyframes flyAway {
        0% { transform: translateY(0) rotate(0deg); opacity: 1; }
        40% { transform: translateY(-100px) rotate(180deg); opacity: 1; }
        100% { transform: translateY(-250px) rotate(360deg); opacity: 0; }
    }

    /* ------------------------------ M√ÄN H√åNH 2: ƒê√àN L·ªíNG (LANTERN SCREEN) ------------------------------ */
    #lantern-screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0; /* B·∫Øt ƒë·∫ßu ·∫©n */
        pointer-events: none; /* Kh√¥ng cho t∆∞∆°ng t√°c khi ·∫©n */
        transition: opacity 1s;
        /* S·ª≠ d·ª•ng @keyframes nightSky t·ª´ index (3).html */
        animation: nightSky 20s ease-in-out infinite alternate;
        background: radial-gradient(circle at center, #0b0f19 40%, #000010); /* Fallback */
    }

    @keyframes nightSky {
        0% { background: radial-gradient(circle at 30% 30%, #081326, #000010 80%); }
        50% { background: radial-gradient(circle at 50% 50%, #101b33, #000010 80%); }
        100% { background: radial-gradient(circle at 70% 40%, #050b18, #000010 80%); }
    }

    /* √Ånh trƒÉng v√† v√≤ng s√°ng xoay quanh */
    .moon-container {
        position: absolute;
        top: 5%;
        left: 10%;
        perspective: 1000px;
        z-index: 10;
    }
    .moon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: radial-gradient(circle at 30% 30%, #fff, #ffcc66 60%, #ff9900 100%);
        box-shadow: 0 0 40px 8px rgba(255, 255, 150, 0.8), 0 0 80px 20px rgba(255, 255, 150, 0.5);
        animation: pulseMoon 5s infinite alternate;
        transform: rotateY(20deg) rotateX(10deg);
    }

    .aura {
        position: absolute;
        top: -30px;
        left: -30px;
        width: 140px;
        height: 140px;
        border-radius: 50%;
        border: 3px solid rgba(255, 255, 200, 0.6);
        box-shadow: 0 0 20px rgba(255, 255, 150, 0.8);
        animation: spin 10s linear infinite;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    @keyframes pulseMoon {
        0% { opacity: 0.8; }
        100% { opacity: 1; }
    }

    /* L·ªìng ƒë√®n */
    .lantern-container {
        position: absolute;
        width: 80px;
        height: 80px;
        cursor: pointer;
        z-index: 15;
        animation: sway-fly 20s linear infinite;
    }
    .lantern-light {
        width: 100%;
        height: 100%;
        background-color: #ff9900;
        border: 3px solid #cc0000;
        border-radius: 50%;
        position: relative;
        box-shadow: 0 0 25px 7px rgba(255, 150, 0, 0.9);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 5px;
        transition: transform 0.3s ease-in-out;
    }
    .lantern-container:hover .lantern-light {
        transform: scale(1.1);
    }
    .lantern-icon {
        font-size: 25px;
        color: #cc0000;
    }
    .hidden-wish {
        position: absolute;
        bottom: -50px;
        left: 50%;
        transform: translateX(-50%);
        padding: 5px 10px;
        background-color: rgba(0, 0, 0, 0.8);
        border-radius: 5px;
        font-size: 12px;
        width: 150px;
        text-align: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.5s;
        z-index: 20;
    }
    .show-wish .hidden-wish {
        opacity: 1;
    }
    @keyframes sway-fly {
        0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0.8; }
        25% { transform: translate3d(150px, -50px, 100px) rotate(5deg); opacity: 1; }
        50% { transform: translate3d(50px, 100px, -50px) rotate(-5deg); opacity: 0.9; }
        75% { transform: translate3d(-100px, 50px, 50px) rotate(2deg); opacity: 0.7; }
        100% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0.8; }
    }
</style>
</head>
<body>

<div id="gift-screen">
    <div class="message">
        <p>üéâ Nh·∫•n v√†o h·ªôp qu√† ƒë·ªÉ b·∫Øt ƒë·∫ßu ƒê√™m Trung Thu Ph√©p Thu·∫≠t! üéâ</p>
    </div>
    <div class="gift-box" id="giftBox">
        <div class="gift-lid" id="giftLid"></div>
        <div class="ribbon"></div>
        <div class="ribbon-horizontal"></div>
    </div>
</div>

<div id="lantern-screen">
    <div class="moon-container">
      <div class="aura"></div>
      <div class="moon"></div>
    </div>
</div>

<div class="shooting-star"></div>

<audio id="music-main" src="Th·∫±ng Cu·ªôi - T·ªë H√†.mp3" loop></audio>


<script>
    const wishes = [
     "Ch√∫c em va gia ƒë√¨nh sung t√∫c, sum v·∫ßy b√™n nhau! üë®‚Äçüë©‚Äçüëß‚Äçüë¶",
     "Ch√∫c em trung thu an l√†nh, vui v·∫ª v√† ·∫•m √°p! üíñ",
     "Ch√∫c em m·ªçi ƒëi·ªÅu ∆∞·ªõc th√†nh hi·ªán th·ª±c, R·∫±m th√°ng T√°m t∆∞∆°i ƒë·∫πp! ‚ú®",
     "Ch√∫c em nh·∫≠n ƒë∆∞·ª£c th·∫≠t nhi·ªÅu l·ªôc v√† ni·ªÅm vui! üéÅ",
     "Ch√∫c em m·ªôt m√πa trung thu th·∫≠t ·∫•m √°p, ng·ªçt ng√†o v√† tr√†n ƒë·∫ßy ni·ªÅm vui.! ü•≥",
     "Ch√∫c em gia ƒë√¨nh b√¨nh an, cu·ªôc s·ªëng vi√™n m√£n! üè°",
     "Ch√∫c em lu√¥n xinh t∆∞∆°i v√† ng·∫≠p tr√†n ti·∫øng c∆∞·ªùi.! üåü",
     "Ch√∫c em lu√¥n v√¥ t∆∞ v√† h·∫°nh ph√∫c! ü•≥",
     "S·ª©c kh·ªèe d·ªìi d√†o, ni·ªÅm vui tr√†n ng·∫≠p! üí™",
     "Ch√∫c em m·ªôt m√πa trung thu ·∫•m √°p v√† tr√†n ƒë·∫ßy t√¨nh y√™u th∆∞∆°ng.! üíò",
     "Ti·ªÅn v√†o nh∆∞ n∆∞·ªõc, h·∫°nh ph√∫c nh√¢n ƒë√¥i! üí∞",
     "Th√†nh c√¥ng, may m·∫Øn lu√¥n ƒë·ªìng h√†nh c√πng em! üçÄ",
     "Ch√∫c em m·ªôt m√πa trung thu th·∫≠t √Ω nghƒ©a.! üì∏",
     "T∆∞∆°i tr·∫ª, r·∫°ng r·ª° nh∆∞ ƒë√®n l·ªìng ƒë√™m trƒÉng! üòä"
    ];
    const icons = ["üèÆ", "üåï", "üê∞", "üêâ", "üéâ", "üéê", "‚ú®", "üéÅ", "üíñ", "üòä", "üéÇ", "üéà"];
    const body = document.body;

    const giftScreen = document.getElementById('gift-screen');
    const lanternScreen = document.getElementById('lantern-screen');
    const giftBox = document.getElementById('giftBox');
    const giftLid = document.getElementById('giftLid');
    const musicMain = document.getElementById('music-main'); // Nh·∫°c ch√≠nh

    // 1. T·∫†O SAO CHUNG
    for (let i = 0; i < 100; i++) {
        const s = document.createElement('div');
        s.className = 'star';
        s.style.width = s.style.height = `${Math.random() * 3}px`;
        s.style.top = `${Math.random() * 100}vh`;
        s.style.left = `${Math.random() * 100}vw`;
        s.style.animationDuration = `${Math.random() * 3 + 1}s`;
        body.appendChild(s);
    }

    function getRandom(a) { return a[Math.floor(Math.random() * a.length)]; }

    // 2. LOGIC M√ÄN H√åNH H·ªòP QU√Ä
    giftBox.addEventListener('click', openGiftBox);

    function openGiftBox() {
        giftBox.removeEventListener('click', openGiftBox); // NgƒÉn click l·∫ßn 2
        
        // CH·∫†Y NH·∫†C (B·∫Øt ƒë·∫ßu t·ª´ ƒë·∫ßu v√† kh√¥ng l·∫∑p)
        musicMain.currentTime = 0; 
        musicMain.loop = false; 
        musicMain.play().catch(() => {});
        
        giftBox.style.animation = 'none';

        // N·∫Øp h·ªôp bay xoay
        giftLid.style.animation = 'flyAway 2.5s ease-out forwards';

        // √Ånh s√°ng b√πng n·ªï, Ph√°o hoa, Kh√≥i
        const burst = document.createElement('div');
        burst.className = 'burst';
        burst.style.top = `${window.innerHeight / 2}px`;
        burst.style.left = `${window.innerWidth / 2}px`;
        body.appendChild(burst);
        setTimeout(() => burst.remove(), 1500);

        for (let i = 0; i < 100; i++) {
            const fw = document.createElement('div');
            fw.className = 'firework';
            fw.style.left = '50%';
            fw.style.top = '50%';
            fw.style.setProperty('--x', `${(Math.random() - 0.5) * 400}px`);
            fw.style.setProperty('--y', `${(Math.random() - 0.5) * 400}px`);
            fw.style.background = `hsl(${Math.random() * 360}, 100%, 70%)`;
            body.appendChild(fw);
            setTimeout(() => fw.remove(), 1200);
        }

        for (let i = 0; i < 15; i++) {
            const smoke = document.createElement('div');
            smoke.className = 'smoke';
            smoke.style.left = `${50 + (Math.random() * 20 - 10)}%`;
            smoke.style.top = '50%';
            smoke.style.animationDelay = `${Math.random() * 0.5}s`;
            body.appendChild(smoke);
            setTimeout(() => smoke.remove(), 3000);
        }

        // Chuy·ªÉn m√†n h√¨nh sau 5 gi√¢y
        setTimeout(showLanternScreen, 5000);
    }

    // 3. LOGIC CHUY·ªÇN M√ÄN H√åNH V√Ä T·∫†O ƒê√àN L·ªíNG
    function showLanternScreen() {
        giftScreen.style.opacity = '0';
        giftScreen.style.pointerEvents = 'none';

        lanternScreen.style.opacity = '1';
        lanternScreen.style.pointerEvents = 'auto';

        // CH·∫†Y NH·∫†C N·ªÄN CH√çNH (Ti·∫øp t·ª•c nh·∫°c v√† B·∫¨T L·∫∂P)
        musicMain.loop = true;
        musicMain.play().catch(() => {});

        // T·∫°o ƒê√®n l·ªìng trong m√†n h√¨nh ch√≠nh
        for (let i = 0; i < 15; i++) {
            const l = document.createElement('div');
            l.className = 'lantern-container';
            l.style.top = `${Math.random() * 80 + 5}vh`;
            l.style.left = `${Math.random() * 80 + 10}vw`;
            l.style.animationDelay = `${Math.random() * 15}s`;
            l.style.filter = `hue-rotate(${Math.random() * 360}deg)`;
            l.innerHTML = `
                <div class="lantern-light">
                  <span class="lantern-icon">${getRandom(icons)}</span>
                  <div class="hidden-wish">Click ƒë·ªÉ m·ªü l·ªùi ch√∫c!</div>
                </div>`;
            l.addEventListener('click', revealWish);
            lanternScreen.appendChild(l);
        }
    }

    // 4. LOGIC M·ªû L·ªúI CH√öC T·ª™ ƒê√àN L·ªíNG
    function revealWish(e) {
        const l = e.currentTarget;
        const rect = l.getBoundingClientRect();

        const w = l.querySelector('.hidden-wish');
        w.textContent = getRandom(wishes);
        l.classList.add('show-wish');
        setTimeout(() => l.classList.remove('show-wish'), 4000);

        // Hi·ªáu ·ª©ng ph√°o hoa, kh√≥i t·∫°i v·ªã tr√≠ click
        const burst = document.createElement('div');
        burst.className = 'burst';
        burst.style.left = `${rect.left + rect.width / 2}px`;
        burst.style.top = `${rect.top + rect.height / 2}px`;
        body.appendChild(burst);
        setTimeout(() => burst.remove(), 1000);

        for (let i = 0; i < 40; i++) {
            const f = document.createElement('div');
            f.className = 'firework';
            f.style.left = `${rect.left + rect.width / 2}px`;
            f.style.top = `${rect.top + rect.height / 2}px`;
            f.style.setProperty('--x', `${(Math.random() - 0.5) * 200}px`);
            f.style.setProperty('--y', `${(Math.random() - 0.5) * 200}px`);
            f.style.background = `hsl(${Math.random() * 360}, 100%, 70%)`;
            body.appendChild(f);
            setTimeout(() => f.remove(), 1000);
        }

        for (let i = 0; i < 8; i++) {
            const smoke = document.createElement('div');
            smoke.className = 'smoke';
            smoke.style.left = `${rect.left + rect.width / 2}px`;
            smoke.style.top = `${rect.top + rect.height / 2}px`;
            smoke.style.animationDelay = `${Math.random() * 0.5}s`;
            body.appendChild(smoke);
            setTimeout(() => smoke.remove(), 3000);
        }
    }
</script>

</body>
</html>

